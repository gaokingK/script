### AMQP概述
[link](https://blog.csdn.net/weixin_37641832/article/details/83270778)
AMQP(Advanced Message Queuing Protocol)高级消息队列协议 是一个进程间传递异步消息的网络协议
```mermaid
graph LR
A[发布者]-->B[交换机Exchange] --> C[队列Queue] --> D[消费者]

```
交换机和队列就是AMQP的实体
#### 工作过程
发布者发布消息(Message), 交换机根据路由规则将消息分发到与交换机绑定的队列，然后AMQP代理会将队列中的消息投递给订阅了该队列的消费者，或者是消费者自己获取
#### 深入理解
1. 生产者、消费者、交换机、队列都可以有多个，因为AMQP是一个网络协议，所以这个过程中的AMQP实体和生产者消费者可以分别存在不同的设备上
2. 发布者发布消息的时候可以给消息指定多个属性，有些属性对交换机是不透明的，可以被他们使用，有些则是透明的。
3. 为了保证消息传递的可靠性，解决网络或者消费者在处理消息时出现异常，防止没处理成功的消息丢失，AMQP包含消息确认机制，当消息发送给消费者后，并不会将此消息从队列中删除，而是收到消费者的队列回执后才会删除
4. 在某些情况下，例如当一个消息无法被成功路由时（无法从交换机分发到队列），消息或许会被返回给发布者并被丢弃。或者，如果消息代理执行了延期操作，消息会被放入一个所谓的死信队列中。此时，消息发布者可以选择某些参数来处理这些特殊情况。

### 交换机
1. 交换机可以将消息分发个给一个或者多个队列
2. 一共有四种交换机：主题交换机....